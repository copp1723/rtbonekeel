name 'ratio' is not defined